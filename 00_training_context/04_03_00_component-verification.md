# Session 4.3: Component Verification

**Focus:** Component Tests
**Time:** ~30 minutes

**Prerequisites:** Completed [04_02_system-construction.md](04_02_system-construction.md) with code uploaded to Arduino.

---

## Component Testing: Black-Box Verification

**Purpose:** Test software requirements at application layer without hardware dependencies.

**Approach:** Inject inputs → call app task → verify outputs (no HAL integration).

**Example:**
```cpp
AppInput_t input = {
    .buttonUpPressed = true, 
    .limitUPSwitch = false, 
    .limitDOWNSwitch = false
};
AppOutput_t output;

App_Task(&input, &output);

EXPECT_EQ(output.motorDirection, RAISING);
EXPECT_EQ(output.motorSpeedPct, 100);
EXPECT_EQ(output.error, false);
```

## Part 1: Component Test Case

Write component test cases abstracting away HAL layer.
Note: In this case, Test Case Specification are not generated by choice. Traceability and documentation can be extracted directly from the test case implementation.

**Prompt (Copy & Paste):**
```

TASK: Generate 8–10 Google Test component tests for desk automation software (black-box testing at application layer) - Derive Component Tests from Software Requirements.
Test cases must be traceable to one or more Software Requirements.
Add test case description and test step comments directly into the test case as it will be used as documentation/specification.

UPSTREAM DOCS: 
- software requirements
- software architecture

TEST SCOPE:
- Target: Application Layer
- Input: Application Input Structre
- Output: Application Output Structure
- No HAL calls (hardware-agnostic)

COVERAGE:
- Ensure all software requirements are covered
- In case a requirement cannot be tested, make it clear on the report

TEST TEMPLATE:
1. Name: TEST_F(AppTest, <REQ_ID-SystemBehavior>)
2. Setup: Initialize Application level based on its init functions
3. Execute: app task as if it would be integrated into the signal layer
4. Assert: prefer EXPECT_EQ


OUTPUT: test component software requirements (Google Test, ready to compile) under tests directory
```

---

## Build & Run

```bash
# Configure & build
mkdir build && cd build
cmake ..
cmake --build .

# Run tests
ctest --verbose
```

**Pass criteria:** All tests pass; 100% SWReq coverage.

---

**Next Step:** Proceed to [software integration verification](04_03_01_software_integration-verification.md).